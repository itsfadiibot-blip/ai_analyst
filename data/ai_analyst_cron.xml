<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Cron: Clean up old audit logs based on retention policy -->
        <record id="cron_cleanup_audit_logs" model="ir.cron">
            <field name="name">AI Analyst: Cleanup Old Audit Logs</field>
            <field name="model_id" ref="model_ai_analyst_audit_log"/>
            <field name="state">code</field>
            <field name="code">
retention_days = int(env['ir.config_parameter'].sudo().get_param(
    'ai_analyst.log_retention_days', '90'
))
cutoff = datetime.datetime.utcnow() - datetime.timedelta(days=retention_days)
old_logs = env['ai.analyst.audit.log'].sudo().search([
    ('create_date', '&lt;', cutoff.strftime('%Y-%m-%d %H:%M:%S'))
])
if old_logs:
    old_logs.unlink()
            </field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="True"/>
            <field name="doall" eval="False"/>
        </record>

        <!-- Cron: Clean up old tool call logs -->
        <record id="cron_cleanup_tool_logs" model="ir.cron">
            <field name="name">AI Analyst: Cleanup Old Tool Call Logs</field>
            <field name="model_id" ref="model_ai_analyst_tool_call_log"/>
            <field name="state">code</field>
            <field name="code">
retention_days = int(env['ir.config_parameter'].sudo().get_param(
    'ai_analyst.log_retention_days', '90'
))
cutoff = datetime.datetime.utcnow() - datetime.timedelta(days=retention_days)
old_logs = env['ai.analyst.tool.call.log'].sudo().search([
    ('create_date', '&lt;', cutoff.strftime('%Y-%m-%d %H:%M:%S'))
])
if old_logs:
    old_logs.unlink()
            </field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="True"/>
            <field name="doall" eval="False"/>
        </record>

        <record id="cron_process_boss_exports" model="ir.cron">
            <field name="name">AI Analyst: Process Boss Open Query Exports</field>
            <field name="model_id" ref="model_ai_analyst_boss_export_job"/>
            <field name="state">code</field>
            <field name="code">model.cron_process_queued_exports()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">minutes</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="True"/>
            <field name="doall" eval="False"/>
        </record>

        <record id="cron_refresh_schema_registry" model="ir.cron">
            <field name="name">AI Analyst: Refresh Schema Registry</field>
            <field name="model_id" ref="base.model_ir_config_parameter"/>
            <field name="state">code</field>
            <field name="code">env['ai.analyst.schema.registry'].discover_models()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="True"/>
            <field name="doall" eval="False"/>
        </record>

        <record id="cron_purge_query_cache" model="ir.cron">
            <field name="name">AI Analyst: Purge Query Cache</field>
            <field name="model_id" ref="model_ai_analyst_query_cache"/>
            <field name="state">code</field>
            <field name="code">model.purge_expired()</field>
            <field name="interval_number">15</field>
            <field name="interval_type">minutes</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="True"/>
            <field name="doall" eval="False"/>
        </record>

    </data>
</odoo>

